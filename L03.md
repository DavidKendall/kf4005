---
layout: default
title: Shell script exercises
<!--license: https://github.com/DavidKendall/blinky/blob/master/LICENSE-->
parse_block_html: true
---

* TOC
{: toc}

{::options parse_block_html="true" /}


## Introduction

This lab is based on the material in
[The Linux Command Line](http://hesabu.net/kf4005/assets/ra/TLCL.pdf) chapters
24 to 35.

> It is worth going over the [Gentle Introduction to vi
> chapter](http://hesabu.net/kf4005/assets/ra/TLCL.pdf)
> as a passing familiarity with `vi` is always useful


Scripts are very powerful tools in the hands of a Unix programmer.
Of the 4643 commands available through the PATH variable on my machine,
601 are shell scripts (about 12%).  This data itself was collected with a shell script
shown below (don't worry if you don't understand it yet!).

```sh
#/bin/bash
declare -A counts
for d in ${PATH//:/ }
do
        for f in $d/*
        do
                type=$(file -Lb $f|cut -d, -f1)
                counts["$type"]=$((${counts["$type"]}+1))
        done
done

declare -i total
for key in "${!counts[@]}"
do
        total+=${counts[$key]}
        echo -e ${counts[$key]} "\t" $key
done
echo -e $total "\t" total
```
{: .example }



## Exercises

Remember that the text in the blue boxes goes _into_ a file, that file has the
execute bit set and then the file is executed at the command prompt.

```sh
unix$ vi hello
unix$ chmod u+x hello
unix$ ./hello
Hello everyone!
unix$ ./hello
Hello everyone!
unix$ 
```
{: .question }


1. Try the hello world script from chapter 24.
	```sh
	#!/bin/bash
	echo "hello world"
	```
	{: .code}
2. We want to produce some reports with a header, modify the _here document_
   example from page 371
	```sh
	#!/bin/bash
	cat<<eof
	| title: A Report Generator for $HOST
    | author: A N Other ($LOGNAME)
	| date: $
	eof
	```
	{: .code}


## Getting some data.


## Command line Options
Shell scripts are _almost never_ interactive.  Control of the script's
behaviour is through command-line-options.  [Chapter 12 of the POSIX
standard](http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap12.html)
discusses the syntax and conventions used for options.

The shell provides a command `getops` that helps with the processing of shell
options.  (There is a [small
tutorial](http://wiki.bash-hackers.org/howto/getopts_tutorial) online).



